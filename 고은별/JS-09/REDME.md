# 타입 변환이란?

자바스크립트에서는 **값(value) 이 항상 어떤 타입(type)**을 갖고 있다.  
예: 42는 숫자, "hello"는 문자열 등.

타입 변환(type conversion) 또는 타입 캐스팅(type casting)은 **개발자에 의해 의도적으로 값의 타입을 바꾸는 것**을 말함.

**명시적(explicit)** 타입 변환: 개발자가 **직접** “나는 이 값을 숫자로 바꾸겠다 / 문자열로 바꾸겠다”라고 코드에서 쓰는 경우.

**암묵적(implicit)** 타입 변환(=타입 강제 변환): **JS 엔진**이 문맥(context) 판단해서 **자동으로 변환**해주는 경우.

## 암묵적 타입 변환 (Implicit Coercion)

JS 엔진이 문맥에 따라 자동으로 타입을 바꾸는 경우인데, 자주 혼동되는 만큼 **어떤 상황에서 어떻게 바뀌는지 이해하는 게 중요함.**

암묵적 변환은 대체로 **문자열, 숫자, 불리언 타입 간에서** 일어남.

### 문자열 타입으로 변환되는 경우

- **연산자에서 피연산자 중 하나라도 문자열이면 문자열 연결(concatenation)으로 동작**

```
1 + '2' // "12"
```

- 템플릿 리터럴(\${ ... }``) 안에서 표현식 결과가 문자열이어야 할 때 등.

```
`1 + 1 = ${1 + 1}` // "1 + 1 = 2"
```

- 숫자, 불리언, null, undefined, 객체 등 다양한 타입이 문자열과 연결되면 문자열로 암묵적 변환됨.

```
예:
true + '' → "true"

null + '' → "null"

[] + '' → ""

[10, 20] + '' → "10,20"
```

### 숫자 타입으로 변환되는 경우

- 산술 연산자(-, \*, /, % 등) 사용 시 피연산자 중에 **숫자가 아닌 값이 있으면 숫자로 변환**하려고 함.

```
1 - '1' // 0
1 * '10' // 10
```

- 비교 연산자(>, <, >=, <=)도 비교를 위해 숫자 타입으로 변환됨.

```
'1' > 0 // true
```

- 단항 덧셈 연산자 + 앞에 붙이면 숫자로 변환 시도:

```
+'1' // 1
+true // 1
+undefined // NaN
```

몇몇 값들은 숫자로 변환하면 특별한 결과 나온다:

```
false → 0

true → 1

null → 0

undefined → NaN

빈 문자열 '' → 0

배열 []는 빈 문자열처럼 취급되어 0

배열에 요소 있는 경우, 숫자로 변환 안 되서 NaN
```

- 불리언 타입으로 변환되는 경우 (Truthy / Falsy)

  - 조건문(if, while 등)이나 논리 연산자(&&, ||, !) 안에서 값이 불리언으로 평가되어야 할 때 암묵 변환됨.

  - Falsy한 값들 (거짓으로 취급되는 값들)은 다음과 같음:

  ```
  false, undefined, null, 0, -0, NaN, '' (빈 문자열)
  ```

이외의 값들은 Truthy로 평가됨.

```
예: "0" (문자열 "0"), {}, [] 등도 참처럼 취급됨.
문자열 '' 안에 값이 없으면 false, '0' 값이 있으면 true.
```

### 명시적 타입 변환 (Explicit Coercion)

**직접 “내가 바꾼다”라고 표시하는 방법.** 암묵적 변환은 예측이 중요하니까, 명시적 변환을 적절히 쓰면 버그 예방에 좋음.

문자열로 바꾸기

```
String(1)             // "1"
(1).toString()         // "1"
1 + ''                // "1"  (암묵적으로도 문자열 연결)
```

숫자로 바꾸기

```
Number('10')          // 10
parseInt('10.53')     // 10
parseFloat('10.53')   // 10.53
+'123'                // 123   (단항 + 연산자)
'10' * 1              // 10    (암묵적으로 숫자 변환됨)
```

불리언으로 바꾸기

```
Boolean('some string')    // true
Boolean('')               // false
!!value                   // value가 truthy면 true, falsy면 false
```

### 단축 평가 (Short-Circuit Evaluation)

**논리 연산자 (&&, ||)의 특성을 활용한 평가 방식.**

&& (AND): 
왼쪽이 Falsy면, 왼쪽 값을 반환.
왼쪽이 Truthy면, 오른쪽 값을 반환.

```
예:
false && anything  // false
'Cat' && 'Dog'     // 'Dog'  
(‘Cat’은 truthy라서 다음 평가함. 오른쪽 값(뒤에 값 우선) 반환.)
```

|| (OR): 
왼쪽이 Truthy면, 왼쪽 값을 반환.
왼쪽이 Falsy면, 오른쪽 값을 반환.

```
예:
'Cat' || 'Dog'    // 'Cat'
false || 'Dog'    // 'Dog'
(false는 falsy라서 다음 평가함. 오른쪽 값 반환.)
```

유용한 패턴:

```
var elem = null;

console.log(elem.value); 
// TypeError: Cannot read property 'value' of null

console.log(elem && elem.value); // null


function getStringLength(str) {
  str = str || '';
  return str.length;
}

str이 null 값이고 falsy여서 ''이 값이 str로 적용.
```
→ 인수가 주어지지 않거나 undefined인 경우 대비하는 것 등.

### 주의할 점

암묵적 타입 변환이 어디서 일어나는지 모르면, 버그가 생길 가능성이 높다.  
특히 == 비교, + 연산, 조건문, 비교 연산자 사용 시.

항상 어떤 값이 truthy / falsy 인가, 문자열 + 숫자 연산이 어떻게 될지, 빈 문자열, null, undefined 등의 변환 결과를 미리 생각해보면 좋다.


## 알아두기!!  
**가비지 컬렉터(Garbage Collector)**는 메모리 관리를 자동으로 해주는 시스템.
**피연산자(Operand)**는 연산자가 작업을 수행하는 대상.
  ```
  let result = 5 + 3;
  //           ^   ^
  //      피연산자들
  //             ^
  //           연산자
  ```
**래퍼 객체(Wrapper Object)**는 원시 값을 객체처럼 사용할 수 있게 해주는 임시 객체.